<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Amr Mousa â€” Portfolio</title>
  <meta name="description" content="Amr Mousa â€” Data Analyst | Power BI | SQL | Python â€” Portfolio" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ---------------- Variables & Themes ---------------- */
    :root{
      --radius:14px;
      --ease: cubic-bezier(.2,.9,.3,1);
      --trans: 360ms var(--ease);

      /* Light palette */
      --light-bg: #f6f8fb;
      --light-surface: #ffffff;
      --light-text: #071026;      /* strong navy */
      --light-muted: #475569;
      --light-accent-a: #0b84ff;  /* bright */
      --light-accent-b: #0b3b66;  /* deep */

      /* Dark palette */
      --dark-bg: #08060a;
      --dark-surface: rgba(255,255,255,0.03);
      --dark-text: #e6eef8;
      --dark-muted: #9aa4b2;
      --dark-accent-a: #7c3aed;   /* purple */
      --dark-accent-b: #3b82f6;   /* electric blue */

      /* runtime tokens (default dark) */
      --bg: var(--dark-bg);
      --surface: var(--dark-surface);
      --text: var(--dark-text);
      --muted: var(--dark-muted);
      --accent-a: var(--dark-accent-a);
      --accent-b: var(--dark-accent-b);
      --glass: rgba(255,255,255,0.04);
    }

    body.light{
      --bg: var(--light-bg);
      --surface: var(--light-surface);
      --text: var(--light-text);
      --muted: var(--light-muted);
      --accent-a: var(--light-accent-a);
      --accent-b: var(--light-accent-b);
      --glass: rgba(11,59,102,0.06);
    }

    /* ---------------- Reset / Base ---------------- */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--text);background:var(--bg);transition:background var(--trans), color var(--trans)}
    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block}
    button{font-family:inherit;cursor:pointer;border:0;background:none}
    /* smooth scroll-snap for full sections */
    main{height:100vh;overflow-y:auto;scroll-snap-type:y mandatory;scroll-behavior:smooth}
    section{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;scroll-snap-align:start;position:relative}
Â  Â  section#hero.split-hero{justify-content:flex-start;align-items:flex-start;padding:0;display:grid} /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„ÙŠØ¯ÙˆÙŠ */
    .container{max-width:1200px;width:100%;margin:0 auto;padding:24px}

    /* ---------------- Top controls ---------------- */
    .top-left, .top-right {position:fixed;z-index:200;display:flex;gap:10px;align-items:center}
    .top-left{left:16px;top:14px}
    .top-right{right:16px;top:14px}
    .icon-btn{width:48px;height:48px;border-radius:12px;background:var(--surface);display:inline-flex;align-items:center;justify-content:center;box-shadow:0 12px 36px rgba(2,6,23,0.5);transition:transform .14s ease, background var(--trans)}
    .icon-btn:active{transform:translateY(1px)}
    .icon-btn:hover{transform:scale(1.05)}
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

    /* ---------------- Drawer (left) ---------------- */
    .drawer {
  position:fixed;left:12px;top:12px;height:calc(100vh - 24px);width:72px;border-radius:16px;background:transparent;box-shadow:0 30px 80px rgba(2,6,23,0.6);overflow:hidden;z-index:190;
  display:flex;flex-direction:column;align-items:center;padding:12px;backdrop-filter: blur(6px);
  /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø£Ø¶ÙÙ†Ø§ transform ÙˆØ­Ø°ÙÙ†Ø§ width Ù…Ù† Ø§Ù„Ù€ transition */
  transform: translateX(-120%); /* <-- Ø­Ø±Ùƒ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø© */
  transition: transform .28s var(--ease), background .28s var(--ease);
}
      .drawer.expanded{
      width: 320px; /* <-- Ù†Ø­Ø¯Ø¯ Ø§Ù„Ø¹Ø±Ø¶ Ù‡Ù†Ø§ ÙÙ‚Ø· */
      transform: translateX(0); /* <-- Ø±Ø¬Ù‘Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ */
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.03));}
    .mini-dot{width:44px;height:44px;border-radius:10px;background:linear-gradient(90deg,var(--accent-b),var(--accent-a));box-shadow:0 10px 30px rgba(0,0,0,0.25)}
    .menu{width:100%;display:flex;flex-direction:column;gap:10px;margin-top:18px;align-items:stretch;justify-content:center;height:100%}
    .menu-item{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;cursor:pointer;transition:background .18s}
    .menu-item:hover{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03));transform:translateX(4px)}
    .menu-item .icon-box{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff}
    .menu-item .label{font-weight:700;font-size:16px;color:var(--text);opacity:0;transition:opacity .22s}
    .drawer.expanded .label{opacity:1}

    /* center menu items vertically */
    .menu-centered{display:flex;flex-direction:column;justify-content:center;height:100%;gap:14px;padding:12px}

    /* ---------------- Blobs / Wave decoration ---------------- */
    .blob{position:fixed;border-radius:50%;filter:blur(40px);opacity:0.12;pointer-events:none;transition:transform 1s linear;z-index:30}
    .b1{width:520px;height:520px;left:-160px;top:-160px;background:radial-gradient(circle at 30% 30%, var(--accent-a), transparent 40%)}
    .b2{width:360px;height:360px;right:-120px;bottom:-100px;background:radial-gradient(circle at 60% 40%, var(--accent-b), transparent 40%)}
    .wave-top{position:fixed;left:0;right:0;height:120px;top:0;transform:translateY(-60%);background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);pointer-events:none;z-index:29}

    /* ---------------- Section inner layout ---------------- */
    .section-inner{width:100%;max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 420px;gap:32px;align-items:center}
    .card{background:var(--surface);border-radius:var(--radius);padding:26px;backdrop-filter:blur(6px);box-shadow:0 18px 40px rgba(2,6,23,0.6);transition:transform .25s,var(--trans)}

    /* Intro / Hero */
    .hero-title{font-size:44px;line-height:1.02;margin:0;color:var(--accent-a);font-weight:700}
    .hero-sub{margin-top:8px;font-size:18px;color:var(--text);font-weight:400}
    .cta{display:flex;gap:12px;margin-top:16px}
    .btn-primary{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));color:white;padding:12px 18px;border-radius:999px;border:0;box-shadow:0 10px 30px rgba(11,59,102,0.12);font-weight:700}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:10px 16px;border-radius:999px}

    /* Who section */
    .who-grid{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center}
    .separator{height:6px;border-radius:999px;background:linear-gradient(90deg,var(--accent-a),var(--accent-b));margin:14px 0;box-shadow:0 10px 30px rgba(11,59,102,0.06)}

    /* Projects grid */
    .projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}

    /* Contact */
    .contact-card{display:flex;flex-direction:column;gap:10px;align-items:flex-start}

    /* responsive */
    @media (max-width:980px){
      .section-inner{grid-template-columns:1fr;padding:8px}
      .drawer.expanded{width:calc(100% - 32px);left:16px;right:16px}
    }
    @media (max-width:640px){
      .top-left{left:8px}
      .top-right{right:8px}
      .icon-btn{width:42px;height:42px}
      .hero-title{font-size:34px}
    }

    /* small entrance animation */
    .fade-up{opacity:0;transform:translateY(12px);animation:fadeUp .66s forwards}
    @keyframes fadeUp{to{opacity:1;transform:none}}

    /* New Split Hero Design */
Â  Â  .split-hero{
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: 40% 60%; /* ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ø§Ø´Ø© */
Â  Â  Â  padding: 0; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¨Ø§Ø¯ÙŠÙ†Øº Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù„Ù„Ø³ÙƒØ´Ù† */
Â  Â  Â  min-height: 100vh;
Â  Â  Â  align-items: stretch;
Â  Â  Â  position: relative;
Â  Â  }
Â  Â  .split-left{
Â  Â  Â  background: var(--accent-a); /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙˆÙ† Ø§Ù„Ù€ accent-a ÙƒØ®Ù„ÙÙŠØ© Ù„Ù„ÙŠØ³Ø§Ø± */
Â  Â  Â  color: white;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  padding: 60px 20px;
Â  Â  }
Â  Â  .logo-name{
Â  Â  Â  font-size: 26px;
Â  Â  Â  font-weight: 300;
Â  Â  Â  align-self: flex-start;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }
Â  Â  .hero-image-container{
Â  Â  Â  width: 300px;
Â  Â  Â  height: 300px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  overflow: hidden;
Â  Â  Â  box-shadow: 0 0 0 10px rgba(255,255,255,0.1), 0 0 0 20px rgba(0,0,0,0.1);
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  margin: auto 0; /* ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ */
Â  Â  }
Â  Â  .hero-photo{
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  object-fit: cover;
Â  Â  }
Â  Â  .social-links{
Â  Â  Â  display: flex;
Â  Â  Â  gap: 18px;
Â  Â  Â  margin-top: 30px;
Â  Â  }
Â  Â  .social-links a{
Â  Â  Â  font-size: 22px;
Â  Â  Â  color: rgba(255,255,255,0.75);
Â  Â  Â  transition: color .2s;
Â  Â  }
Â  Â  .social-links a:hover{
Â  Â  Â  color: white;
Â  Â  Â  transform: scale(1.1);
Â  Â  }

Â  Â  .split-right{
Â  Â  Â  background: var(--dark-bg); /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„ÙŠÙ…ÙŠÙ† */
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  padding: 40px;
Â  Â  }
Â  Â  .hero-text-content{
Â  Â  Â  max-width: 500px;
Â  Â  }
Â  Â  .sub-heading{
Â  Â  Â  font-size: 16px;
Â  Â  Â  color: var(--muted);
Â  Â  Â  font-weight: 600;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }
Â  Â  .hero-main-name{
Â  Â  Â  font-size: 68px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: var(--text);
Â  Â  Â  margin: 0 0 16px 0;
Â  Â  Â  line-height: 1;
Â  Â  }
Â  Â  .hero-intro-text{
Â  Â  Â  font-size: 18px;
Â  Â  Â  line-height: 1.6;
Â  Â  Â  color: var(--muted);
Â  Â  Â  max-width: 420px;
Â  Â  Â  margin-bottom: 24px;
Â  Â  }
Â  Â  
Â  Â  /* Responsive adjustments for the new Hero section */
Â  Â  @media (max-width:980px){
Â  Â  Â  .split-hero{
Â  Â  Â  Â  grid-template-columns: 1fr; /* Ø¹Ù…ÙˆØ¯ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
Â  Â  Â  }
Â  Â  Â  .split-left{
Â  Â  Â  Â  min-height: 500px;
Â  Â  Â  Â  padding: 40px 20px;
Â  Â  Â  }
Â  Â  Â  .hero-image-container{
Â  Â  Â  Â  width: 200px;
Â  Â  Â  Â  height: 200px;
Â  Â  Â  }
Â  Â  Â  .logo-name{ align-self: center; } /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ø´Ø¹Ø§Ø± */
Â  Â  Â  .social-links{ margin-top: 20px; }
Â  Â  Â  .split-right{
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  padding: 60px 20px;
Â  Â  Â  }
Â  Â  Â  .hero-text-content{
Â  Â  Â  Â  max-width: none;
Â  Â  Â  }
Â  Â  Â  .hero-main-name{
Â  Â  Â  Â  font-size: 52px;
Â  Â  Â  }
Â  Â  }
Â  Â  @media (max-width:640px){
Â  Â  Â  .hero-main-name{ font-size: 40px; }
Â  Â  Â  .hero-intro-text{ font-size: 16px; }
Â  Â  Â  .cta{ justify-content: center; }
Â  Â  }
    /* Hero button overrides for white background */
    .split-left .cta .btn-primary {
        background: white;
        color: var(--accent-a); /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ ÙŠØµØ¨Ø­ Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    .split-left .cta .btn-ghost {
        color: white;
        border-color: rgba(255, 255, 255, 0.3);
    }
  </style>
</head>
<body>
  <!-- top-left: menu -->
  <div class="top-left" aria-hidden="false">
    <button id="menuBtn" class="icon-btn" aria-label="Open menu">â˜°</button>
  </div>

  <!-- top-right: theme + mute -->
  <div class="top-right" aria-hidden="false">
    <button id="themeBtn" class="icon-btn" aria-label="Toggle theme">ğŸŒ™</button>
    <button id="muteBtn" class="icon-btn" aria-label="Mute sounds">ğŸ”Š</button>
  </div>

  <!-- drawer (left) -->
  <nav id="drawer" class="drawer collapsed" aria-label="Site sections" aria-hidden="true">
    <div class="mini-dot" aria-hidden="true"></div>
    <div class="menu menu-centered" role="menu" aria-orientation="vertical">
      <div class="menu-item" data-target="#hero" role="menuitem" tabindex="0">
        <div class="icon-box" style="background:linear-gradient(90deg,var(--accent-b),var(--accent-a))">ğŸ </div>
        <div class="label">Home</div>
      </div>
      <div class="menu-item" data-target="#who" role="menuitem" tabindex="0">
        <div class="icon-box" style="background:linear-gradient(90deg,var(--accent-a),var(--accent-b))">ğŸ‘¤</div>
        <div class="label">Who am I</div>
      </div>
      <div class="menu-item" data-target="#projects" role="menuitem" tabindex="0">
        <div class="icon-box" style="background:linear-gradient(90deg,var(--accent-b),#6ee7b7)">ğŸ“</div>
        <div class="label">Projects</div>
      </div>
      <div class="menu-item" data-target="#contact" role="menuitem" tabindex="0">
        <div class="icon-box" style="background:linear-gradient(90deg,#f97316,#fb7185)">âœ‰ï¸</div>
        <div class="label">Contact</div>
      </div>
    </div>
  </nav>

  <!-- decorative shapes -->
  <div class="blob b1" aria-hidden="true"></div>
  <div class="blob b2" aria-hidden="true"></div>
  <div class="wave-top" aria-hidden="true"></div>

  <main id="main" tabindex="0" aria-label="Main content">
    <!-- HERO -->
  <section id="hero" aria-labelledby="hero-title" class="split-hero">
Â  Â  Â  <div class="split-left fade-up">
Â  Â  Â  Â  <h1 class="logo-name">Amr Mousa</h1>
Â  Â  Â  Â  <div class="hero-image-container">
Â  Â  Â  Â  Â  <img src="images/amr-mousa-photo.jpg" alt="Amr Mousa" class="hero-photo">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="social-links">
Â  Â  Â  Â  Â  <a href="#" aria-label="LinkedIn">in</a>
Â  Â  Â  Â  Â  <a href="#" aria-label="Twitter">ğŸ¦</a>
Â  Â  Â  Â  Â  <a href="#" aria-label="GitHub">ğŸ™</a>
Â  Â  Â  Â  Â  <a href="#" aria-label="YouTube">â–¶ï¸</a>
Â  Â  Â  Â  Â  <a href="#" aria-label="Email">ğŸ“§</a>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="split-right fade-up" style="animation-delay:0.2s">
Â  Â  Â  Â  <div class="hero-text-content">
Â  Â  Â  Â  Â  <div class="sub-heading">Data Analyst | Power BI | SQL</div>
Â  Â  Â  Â  Â  <h2 id="hero-title" class="hero-main-name">Amr Mousa</h2>
Â  Â  Â  Â  Â  <p class="hero-intro-text">Turning messy transactional data into elegant, actionable insights for quick business action. Specializing in Power BI, SQL, Python, and data modeling.</p>
Â  Â  Â  Â  Â  <div class="cta">
Â  Â  Â  Â  Â  Â  <button class="btn-primary" onclick="window.open('files/Amr-Mousa-CV.pdf')">Download CV</button>
Â  Â  Â  Â  Â  Â  <button class="btn-ghost" onclick="goToSection('#contact')">Contact</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  
Â  Â  Â  <div class="mobile-note" style="display:none;position:absolute;bottom:20px;left:20px;color:var(--muted)">Scroll down for details.</div>
Â  Â  </section>


    <!-- WHO -->
    <section id="who" aria-labelledby="who-title">
      <div class="container">
        <div class="section-inner who-grid">
          <div class="card fade-up">
            <h2 id="who-title">Who am I</h2>
            <div class="separator" aria-hidden="true"></div>
            <p>Iâ€™m a Data Analyst focused on transforming messy transactional data into actionable business insights. I specialize in Power BI, SQL, Python and Excel â€” cleaning data, building star schemas and creating dashboards stakeholders can use to act quickly.</p>
            <p style="margin-top:12px;color:var(--muted);font-size:14px"><strong>Core Skills:</strong> Power BI â€¢ SQL (Joins, CTEs, Window) â€¢ Python (Pandas) â€¢ DAX â€¢ Data Modeling</p>
          </div>

          <div class="card modern-logo fade-up" aria-hidden="true" style="display:flex;align-items:center;justify-content:center">
            <!-- decorative modern SVG -->
            <svg width="260" height="260" viewBox="0 0 260 260" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <linearGradient id="G" x1="0" x2="1">
                  <stop offset="0" stop-color="var(--accent-a)"/>
                  <stop offset="1" stop-color="var(--accent-b)"/>
                </linearGradient>
              </defs>
              <path d="M40 20 C110 0 170 12 220 60 C250 92 270 140 230 200 C190 260 120 270 60 230 C20 200 10 100 40 20 Z" fill="url(#G)" opacity="0.95"/>
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" aria-labelledby="projects-title">
      <div class="container">
        <div style="max-width:1100px;margin:0 auto">
          <h2 id="projects-title">Projects</h2>
          <p style="margin:6px 0 12px;color:var(--muted)">A selection of data-cleaning, dashboards and Python projects.</p>
          <div class="projects-grid">
            <article class="project-card card fade-up">
              <img src="images/data-cleaning.png" alt="data cleaning">
              <h4 style="margin:10px 0 6px">Data Cleaning & Analysis</h4>
              <p style="margin:0 0 10px;color:var(--muted);font-size:14px">Cleaned 10k rows, built star schema and visualized insights in Power BI.</p>
              <div style="display:flex;gap:10px">
                <a href="#" onclick="openWithSound(event)">View on GitHub</a>
                <a href="#" onclick="openWithSound(event)">Live Dashboard</a>
              </div>
            </article>

            <article class="project-card card fade-up">
              <img src="images/coffee-sales.png" alt="coffee sales">
              <h4 style="margin:10px 0 6px">Coffee Shop Sales Dashboard</h4>
              <p style="margin:0 0 10px;color:var(--muted);font-size:14px">Sales KPIs & offers performance.</p>
              <div style="display:flex;gap:10px">
                <a href="#" onclick="openWithSound(event)">View on GitHub</a>
                <a href="#" onclick="openWithSound(event)">Live Dashboard</a>
              </div>
            </article>

            <article class="project-card card fade-up">
              <img src="images/python-project.png" alt="python">
              <h4 style="margin:10px 0 6px">Sales Forecast (Python)</h4>
              <p style="margin:0 0 10px;color:var(--muted);font-size:14px">Time-series model using Pandas & scikit-learn.</p>
              <div style="display:flex;gap:10px">
                <a href="#" onclick="openWithSound(event)">View on GitHub</a>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" aria-labelledby="contact-title">
      <div class="container">
        <div class="card contact-card fade-up" style="max-width:720px;margin:0 auto">
          <h3 id="contact-title">Contact</h3>
          <p style="margin-top:8px;color:var(--muted)">Email: <a href="mailto:amr.mousa@email.com">amr.mousa@email.com</a></p>
          <p style="margin-top:12px;color:var(--muted)">GitHub: <a href="https://github.com/amr-mousa" target="_blank">github.com/amr-mousa</a></p>
          <div style="margin-top:16px"><button class="btn-primary" onclick="goToSection('#hero')">Back to Top</button></div>
        </div>
      </div>
    </section>
  </main>

  <footer style="padding:18px 24px;text-align:center;color:var(--muted)">Â© Amr Mousa â€” Data Analyst</footer>

  <!-- Audio (.wav as requested) -->
  <audio id="introAudio" src="sounds/intro.wav" preload="auto"></audio>
  <audio id="clickAudio" src="sounds/click.wav" preload="auto"></audio>

  <script>
    /* ===== Elements & state ===== */
    const menuBtn = document.getElementById('menuBtn');
    const drawer = document.getElementById('drawer');
    const menuItems = drawer.querySelectorAll('.menu-item');
    const themeBtn = document.getElementById('themeBtn');
    const muteBtn = document.getElementById('muteBtn');
    const introAudio = document.getElementById('introAudio');
    const clickAudio = document.getElementById('clickAudio');
    const main = document.getElementById('main');

    // restore preferences
    const savedTheme = localStorage.getItem('amr_theme') || 'dark';
    const savedMuted = localStorage.getItem('amr_muted') === '1';
    let isMuted = savedMuted;
    let drawerOpen = false;

    // apply theme tokens
    function applyTheme(name){
      if(name === 'light'){ document.body.classList.add('light'); themeBtn.textContent='ğŸŒ'; }
      else { document.body.classList.remove('light'); themeBtn.textContent='ğŸŒ™'; }
      localStorage.setItem('amr_theme', name);
      // adjust blob visibility
      document.querySelectorAll('.blob').forEach(b => b.style.opacity = document.body.classList.contains('light') ? 0.08 : 0.12);
    }
    applyTheme(savedTheme);

    function setMuted(v){
      isMuted = !!v;
      localStorage.setItem('amr_muted', isMuted ? '1' : '0');
      muteBtn.textContent = isMuted ? 'ğŸ”‡' : 'ğŸ”Š';
      introAudio.muted = isMuted;
      clickAudio.muted = isMuted;
    }
    setMuted(isMuted);

    // play intro after first gesture
    let introPlayed = false;
    function firstGesture(){
      if(!introPlayed && !isMuted){
        introAudio.play().catch(()=>{});
        introPlayed = true;
      }
      window.removeEventListener('pointerdown', firstGesture);
    }
    window.addEventListener('pointerdown', firstGesture, {passive:true});

    // click sound helper
    function playClick(){
      if(isMuted) return;
      try { clickAudio.currentTime = 0; clickAudio.play(); } catch(e){}
    }

    // menu open/close
    function setDrawer(open){
      drawerOpen = !!open;
      if(drawerOpen){
        drawer.classList.add('expanded');
        drawer.classList.remove('collapsed');
        drawer.setAttribute('aria-hidden','false');
        // focus first menu item for accessibility
        setTimeout(()=> { const it = drawer.querySelector('.menu-item'); if(it) it.focus(); }, 220);
      } else {
        drawer.classList.remove('expanded');
        drawer.classList.add('collapsed');
        drawer.setAttribute('aria-hidden','true');
      }
    }
    setDrawer(false);

    menuBtn.addEventListener('click', ()=> { setDrawer(!drawerOpen); playClick(); });

    // menu item clicks -> go to section, close drawer
    menuItems.forEach(item=>{
      item.addEventListener('click', ()=>{
        const target = item.getAttribute('data-target');
        setDrawer(false);
        document.querySelector(target)?.scrollIntoView({behavior:'smooth', block:'start'});
        playClick();
      });
      // keyboard
      item.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') item.click(); });
    });

    // toggle theme
    themeBtn.addEventListener('click', ()=>{
      const now = document.body.classList.contains('light') ? 'dark' : 'light';
      applyTheme(now);
      playClick();
    });

    // toggle mute
    muteBtn.addEventListener('click', ()=> { setMuted(!isMuted); });

    // close drawer with Escape
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && drawerOpen){ setDrawer(false); }
    });

    // attach click sound to interactive elements
    document.querySelectorAll('button, a').forEach(el=>{
      el.addEventListener('click', ()=> { playClick(); });
    });

    // subtle blob float animation
    (function floatBlobs(){
      const b1 = document.querySelector('.b1'), b2 = document.querySelector('.b2');
      let t = 0;
      function loop(){
        t += 0.0055;
        if(b1) b1.style.transform = `translate(${Math.cos(t)*6}px, ${Math.sin(t)*10}px)`;
        if(b2) b2.style.transform = `translate(${Math.sin(t)*8}px, ${Math.cos(t)*9}px)`;
        requestAnimationFrame(loop);
      }
      loop();
    })();

    // helpers
    function goToSection(sel){ document.querySelector(sel)?.scrollIntoView({behavior:'smooth'}); if(!isMuted) playClick(); }
    function openWithSound(e){ if(!isMuted) playClick(); }

    // ensure saved UI applied
    setMuted(isMuted);
    applyTheme(savedTheme);
  </script>
</body>
</html>
